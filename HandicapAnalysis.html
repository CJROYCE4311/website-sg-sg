<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golf Handicap Audit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .negative-adj {
            color: #dc2626;
            font-weight: bold;
        }

        .neutral-adj {
            color: #059669;
        }

        .active-mode {
            background-color: #059669;
            color: white;
            border-color: #059669;
        }

        .inactive-mode {
            background-color: white;
            color: #4b5563;
            border-color: #e5e7eb;
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800">

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Header -->
        <div class="mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <div class="flex items-center gap-3">
                <img src="SG-SG Map.png" alt="SG-SG Map" class="h-10 w-10 object-contain">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900 flex items-center gap-2">
                        <span>SG@SG</span>
                        <span class="text-emerald-600">Handicap Audit</span>
                    </h1>
                    <p class="text-slate-500 mt-1">Implied Index vs. Current Index Analysis</p>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 items-center">
                <!-- Mode Toggle -->
                <div class="flex rounded-md shadow-sm" role="group">
                    <button type="button" onclick="setMode('best3')" id="btn-best3"
                        class="px-4 py-2 text-sm font-medium border rounded-l-lg active-mode transition-colors">
                        Best 3 Analysis
                    </button>
                    <button type="button" onclick="setMode('best6')" id="btn-best6"
                        class="px-4 py-2 text-sm font-medium border rounded-r-lg inactive-mode transition-colors">
                        Best 6 Analysis
                    </button>
                </div>

                <div class="flex gap-2">
                    <div class="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 text-center">
                        <span class="text-xs text-slate-500 uppercase font-semibold block">Players</span>
                        <span class="text-xl font-bold" id="totalPlayers">0</span>
                    </div>
                    <div class="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 text-center">
                        <span class="text-xs text-slate-500 uppercase font-semibold block">Avg Gross</span>
                        <span class="text-xl font-bold" id="groupAvgGross">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top Alerts (Top 3 Adjustments) -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Rank 1 -->
            <div
                class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 border-l-4 border-red-600 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-trophy text-6xl"></i></div>
                <h3 class="text-sm font-semibold text-slate-500 uppercase mb-2">#1 Adjustment</h3>
                <div class="text-2xl font-bold text-slate-800 truncate" id="rank1Name">--</div>
                <div class="flex items-baseline gap-2 mt-1">
                    <span class="text-red-600 font-bold text-2xl" id="rank1Val">--</span>
                    <span class="text-sm text-slate-400">suggested</span>
                </div>
                <div class="mt-2 text-xs text-slate-500 bg-slate-100 inline-block px-2 py-1 rounded" id="rank1Rounds">--
                    rounds</div>
            </div>

            <!-- Rank 2 -->
            <div
                class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 border-l-4 border-orange-500 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-medal text-6xl"></i></div>
                <h3 class="text-sm font-semibold text-slate-500 uppercase mb-2">#2 Adjustment</h3>
                <div class="text-2xl font-bold text-slate-800 truncate" id="rank2Name">--</div>
                <div class="flex items-baseline gap-2 mt-1">
                    <span class="text-orange-600 font-bold text-2xl" id="rank2Val">--</span>
                    <span class="text-sm text-slate-400">suggested</span>
                </div>
                <div class="mt-2 text-xs text-slate-500 bg-slate-100 inline-block px-2 py-1 rounded" id="rank2Rounds">--
                    rounds</div>
            </div>

            <!-- Rank 3 -->
            <div
                class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 border-l-4 border-yellow-500 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-medal text-6xl"></i></div>
                <h3 class="text-sm font-semibold text-slate-500 uppercase mb-2">#3 Adjustment</h3>
                <div class="text-2xl font-bold text-slate-800 truncate" id="rank3Name">--</div>
                <div class="flex items-baseline gap-2 mt-1">
                    <span class="text-yellow-600 font-bold text-2xl" id="rank3Val">--</span>
                    <span class="text-sm text-slate-400">suggested</span>
                </div>
                <div class="mt-2 text-xs text-slate-500 bg-slate-100 inline-block px-2 py-1 rounded" id="rank3Rounds">--
                    rounds</div>
            </div>
        </div>

        <!-- Filters & Search -->
        <div
            class="bg-white rounded-t-xl border border-slate-200 p-4 flex flex-col sm:flex-row justify-between items-center gap-4">
            <div class="relative w-full sm:w-64">
                <i class="fa-solid fa-search absolute left-3 top-3 text-slate-400"></i>
                <input type="text" id="searchInput" placeholder="Search player..."
                    class="w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500">
            </div>
            <div class="flex gap-2">
                <button onclick="filterRounds(0)"
                    class="filter-btn px-3 py-1 text-sm rounded-full bg-slate-100 hover:bg-slate-200 active-filter"
                    data-min="0">All Rounds</button>
                <button onclick="filterRounds(3)"
                    class="filter-btn px-3 py-1 text-sm rounded-full bg-slate-100 hover:bg-slate-200" data-min="3">3+
                    Rounds</button>
                <button onclick="filterRounds(5)"
                    class="filter-btn px-3 py-1 text-sm rounded-full bg-slate-100 hover:bg-slate-200" data-min="5">5+
                    Rounds</button>
            </div>
        </div>

        <!-- Table -->
        <div class="bg-white border-x border-b border-slate-200 rounded-b-xl overflow-hidden shadow-sm">
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr
                            class="bg-slate-50 text-slate-600 text-xs uppercase tracking-wider border-b border-slate-200">
                            <th class="p-4 cursor-pointer hover:bg-slate-100" onclick="sortTable('name')">Player <i
                                    class="fa-solid fa-sort ml-1"></i></th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-100"
                                onclick="sortTable('implied')">Implied Index <i class="fa-solid fa-sort ml-1"></i></th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-100"
                                onclick="sortTable('current')">Current Index <i class="fa-solid fa-sort ml-1"></i></th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-100"
                                onclick="sortTable('adjustment')">Suggested Adj <i class="fa-solid fa-sort ml-1"></i>
                            </th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-100"
                                onclick="sortTable('avgGross')">Avg Gross <i class="fa-solid fa-sort ml-1"></i></th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-100" onclick="sortTable('avgNet')">
                                Avg Net <i class="fa-solid fa-sort ml-1"></i></th>
                            <th class="p-4 text-center cursor-pointer hover:bg-slate-100" onclick="sortTable('rounds')">
                                Rounds <i class="fa-solid fa-sort ml-1"></i></th>
                            <th class="p-4">Notes</th>
                        </tr>
                    </thead>
                    <tbody id="statsTableBody" class="text-sm text-slate-700 divide-y divide-slate-100">
                        <!-- Rows generated by JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const dataBest3 = [
    {
        "name": "Andrew Burnheimer",
        "current": 0.0,
        "avgGross": 83.0,
        "avgNet": 83.0,
        "rounds": 1,
        "notes": "",
        "implied": 11.4,
        "adjustment": 11.4
    },
    {
        "name": "Andy Meach",
        "current": 7.1,
        "avgGross": 83.0,
        "avgNet": 75.9,
        "rounds": 7,
        "notes": "",
        "implied": 9.0,
        "adjustment": 1.9
    },
    {
        "name": "Ben Magnone",
        "current": 10.4,
        "avgGross": 83.8,
        "avgNet": 73.4,
        "rounds": 10,
        "notes": "",
        "implied": 7.7,
        "adjustment": -2.7
    },
    {
        "name": "Brad Ackley",
        "current": 13.9,
        "avgGross": 92.0,
        "avgNet": 78.1,
        "rounds": 1,
        "notes": "",
        "implied": 19.6,
        "adjustment": 5.7
    },
    {
        "name": "Brian Howell",
        "current": 6.9,
        "avgGross": 81.5,
        "avgNet": 74.6,
        "rounds": 2,
        "notes": "",
        "implied": 10.1,
        "adjustment": 3.2
    },
    {
        "name": "Bud Scott",
        "current": 9.4,
        "avgGross": 87.5,
        "avgNet": 78.1,
        "rounds": 2,
        "notes": "",
        "implied": 15.5,
        "adjustment": 6.1
    },
    {
        "name": "Buddy Goldstone",
        "current": 13.0,
        "avgGross": 91.3,
        "avgNet": 78.3,
        "rounds": 3,
        "notes": "",
        "implied": 19.0,
        "adjustment": 6.0
    },
    {
        "name": "Chris Beck",
        "current": 13.2,
        "avgGross": 88.9,
        "avgNet": 75.7,
        "rounds": 10,
        "notes": "",
        "implied": 13.8,
        "adjustment": 0.6
    },
    {
        "name": "Chris Husong",
        "current": 9.0,
        "avgGross": 86.8,
        "avgNet": 77.8,
        "rounds": 5,
        "notes": "",
        "implied": 13.8,
        "adjustment": 4.8
    },
    {
        "name": "Chris Ryan",
        "current": 13.3,
        "avgGross": 92.3,
        "avgNet": 79.0,
        "rounds": 6,
        "notes": "",
        "implied": 17.8,
        "adjustment": 4.5
    },
    {
        "name": "Christopher Royce",
        "current": 13.9,
        "avgGross": 91.5,
        "avgNet": 77.6,
        "rounds": 11,
        "notes": "",
        "implied": 14.7,
        "adjustment": 0.8
    },
    {
        "name": "Clark Koch",
        "current": 8.8,
        "avgGross": 81.9,
        "avgNet": 73.1,
        "rounds": 9,
        "notes": "",
        "implied": 7.4,
        "adjustment": -1.4
    },
    {
        "name": "Conrad Copeland",
        "current": 11.8,
        "avgGross": 91.0,
        "avgNet": 79.2,
        "rounds": 1,
        "notes": "",
        "implied": 18.7,
        "adjustment": 6.9
    },
    {
        "name": "Dan Denham",
        "current": 6.5,
        "avgGross": 79.7,
        "avgNet": 73.2,
        "rounds": 3,
        "notes": "",
        "implied": 8.4,
        "adjustment": 1.9
    },
    {
        "name": "Dana Beckley",
        "current": 6.9,
        "avgGross": 90.0,
        "avgNet": 83.1,
        "rounds": 2,
        "notes": "",
        "implied": 17.8,
        "adjustment": 10.8
    },
    {
        "name": "Darrin Harn",
        "current": 0.0,
        "avgGross": 77.0,
        "avgNet": 77.0,
        "rounds": 1,
        "notes": "",
        "implied": 5.9,
        "adjustment": 5.9
    },
    {
        "name": "David Edwards",
        "current": 8.6,
        "avgGross": 81.5,
        "avgNet": 72.9,
        "rounds": 2,
        "notes": "",
        "implied": 10.1,
        "adjustment": 1.5
    },
    {
        "name": "David Pearson",
        "current": 9.6,
        "avgGross": 83.0,
        "avgNet": 73.4,
        "rounds": 1,
        "notes": "",
        "implied": 11.4,
        "adjustment": 1.8
    },
    {
        "name": "Dean Fisk",
        "current": 8.0,
        "avgGross": 85.7,
        "avgNet": 77.7,
        "rounds": 3,
        "notes": "",
        "implied": 13.8,
        "adjustment": 5.8
    },
    {
        "name": "Derek Becko",
        "current": 3.5,
        "avgGross": 79.2,
        "avgNet": 75.8,
        "rounds": 8,
        "notes": "",
        "implied": 5.3,
        "adjustment": 1.8
    },
    {
        "name": "Dusty Wasmund",
        "current": 7.6,
        "avgGross": 80.8,
        "avgNet": 73.2,
        "rounds": 4,
        "notes": "",
        "implied": 8.4,
        "adjustment": 0.8
    },
    {
        "name": "Eric Lamb",
        "current": 24.0,
        "avgGross": 96.0,
        "avgNet": 72.0,
        "rounds": 1,
        "notes": "",
        "implied": 23.2,
        "adjustment": -0.8
    },
    {
        "name": "Eric Weiss",
        "current": 1.0,
        "avgGross": 72.9,
        "avgNet": 71.9,
        "rounds": 9,
        "notes": "",
        "implied": -0.1,
        "adjustment": -1.1
    },
    {
        "name": "Frank Angeloro",
        "current": 7.1,
        "avgGross": 81.0,
        "avgNet": 73.9,
        "rounds": 9,
        "notes": "",
        "implied": 6.8,
        "adjustment": -0.3
    },
    {
        "name": "Glenn Brand",
        "current": 11.1,
        "avgGross": 96.0,
        "avgNet": 84.9,
        "rounds": 1,
        "notes": "",
        "implied": 23.2,
        "adjustment": 12.1
    },
    {
        "name": "Greg Funk",
        "current": 5.2,
        "avgGross": 77.6,
        "avgNet": 72.4,
        "rounds": 11,
        "notes": "",
        "implied": 3.2,
        "adjustment": -2.0
    },
    {
        "name": "Hans Anderson",
        "current": 0.6,
        "avgGross": 73.7,
        "avgNet": 73.1,
        "rounds": 3,
        "notes": "",
        "implied": 2.9,
        "adjustment": 2.3
    },
    {
        "name": "James Feutz",
        "current": 0.0,
        "avgGross": 72.0,
        "avgNet": 72.0,
        "rounds": 2,
        "notes": "",
        "implied": 1.4,
        "adjustment": 1.4
    },
    {
        "name": "Jamey Davis",
        "current": 13.4,
        "avgGross": 85.3,
        "avgNet": 71.9,
        "rounds": 3,
        "notes": "",
        "implied": 13.5,
        "adjustment": 0.1
    },
    {
        "name": "Jared Strathe",
        "current": -3.8,
        "avgGross": 69.3,
        "avgNet": 73.1,
        "rounds": 3,
        "notes": "",
        "implied": -1.1,
        "adjustment": 2.7
    },
    {
        "name": "Jeff Avery",
        "current": 11.2,
        "avgGross": 86.7,
        "avgNet": 75.5,
        "rounds": 3,
        "notes": "",
        "implied": 14.7,
        "adjustment": 3.5
    },
    {
        "name": "Jeff Cloepfil",
        "current": 12.0,
        "avgGross": 84.4,
        "avgNet": 72.4,
        "rounds": 7,
        "notes": "",
        "implied": 11.1,
        "adjustment": -0.9
    },
    {
        "name": "Jeff De Laveaga",
        "current": 0.5,
        "avgGross": 70.0,
        "avgNet": 69.5,
        "rounds": 3,
        "notes": "",
        "implied": -0.5,
        "adjustment": -1.0
    },
    {
        "name": "Jim Brown",
        "current": 6.2,
        "avgGross": 78.0,
        "avgNet": 71.8,
        "rounds": 1,
        "notes": "",
        "implied": 6.8,
        "adjustment": 0.6
    },
    {
        "name": "Jim Restivo",
        "current": 12.7,
        "avgGross": 88.7,
        "avgNet": 76.0,
        "rounds": 6,
        "notes": "",
        "implied": 15.0,
        "adjustment": 2.3
    },
    {
        "name": "Joe Sepessy",
        "current": 6.1,
        "avgGross": 77.7,
        "avgNet": 71.6,
        "rounds": 6,
        "notes": "",
        "implied": 3.8,
        "adjustment": -2.3
    },
    {
        "name": "Jon Vrolyks",
        "current": 5.7,
        "avgGross": 82.5,
        "avgNet": 76.8,
        "rounds": 6,
        "notes": "",
        "implied": 8.7,
        "adjustment": 3.0
    },
    {
        "name": "Justin Deuker",
        "current": 3.0,
        "avgGross": 78.5,
        "avgNet": 75.5,
        "rounds": 6,
        "notes": "",
        "implied": 5.9,
        "adjustment": 2.9
    },
    {
        "name": "Kevin Barber",
        "current": 15.3,
        "avgGross": 88.4,
        "avgNet": 73.1,
        "rounds": 7,
        "notes": "",
        "implied": 13.5,
        "adjustment": -1.8
    },
    {
        "name": "Kevin Mueller",
        "current": 9.4,
        "avgGross": 89.0,
        "avgNet": 79.6,
        "rounds": 1,
        "notes": "",
        "implied": 16.9,
        "adjustment": 7.5
    },
    {
        "name": "Kiernan Mattson",
        "current": 1.4,
        "avgGross": 75.6,
        "avgNet": 74.2,
        "rounds": 7,
        "notes": "",
        "implied": 0.2,
        "adjustment": -1.2
    },
    {
        "name": "Korey Jerome",
        "current": 9.3,
        "avgGross": 85.8,
        "avgNet": 76.5,
        "rounds": 9,
        "notes": "",
        "implied": 8.7,
        "adjustment": -0.6
    },
    {
        "name": "Larry Caplan",
        "current": 16.1,
        "avgGross": 93.8,
        "avgNet": 77.7,
        "rounds": 5,
        "notes": "",
        "implied": 17.2,
        "adjustment": 1.1
    },
    {
        "name": "Mark Albedyll",
        "current": 14.7,
        "avgGross": 92.8,
        "avgNet": 78.1,
        "rounds": 5,
        "notes": "",
        "implied": 18.1,
        "adjustment": 3.4
    },
    {
        "name": "Mark James",
        "current": 12.6,
        "avgGross": 90.0,
        "avgNet": 77.4,
        "rounds": 3,
        "notes": "",
        "implied": 17.8,
        "adjustment": 5.2
    },
    {
        "name": "Mark Lewis",
        "current": 10.4,
        "avgGross": 86.1,
        "avgNet": 75.7,
        "rounds": 7,
        "notes": "",
        "implied": 10.8,
        "adjustment": 0.4
    },
    {
        "name": "Matt Neimeier",
        "current": 12.2,
        "avgGross": 87.1,
        "avgNet": 74.9,
        "rounds": 9,
        "notes": "",
        "implied": 11.1,
        "adjustment": -1.1
    },
    {
        "name": "Michael Falagrady",
        "current": 5.7,
        "avgGross": 81.3,
        "avgNet": 75.6,
        "rounds": 3,
        "notes": "",
        "implied": 9.9,
        "adjustment": 4.2
    },
    {
        "name": "Mike Muller",
        "current": 7.0,
        "avgGross": 82.8,
        "avgNet": 75.8,
        "rounds": 9,
        "notes": "",
        "implied": 6.8,
        "adjustment": -0.2
    },
    {
        "name": "Nate Adams",
        "current": -6.4,
        "avgGross": 65.0,
        "avgNet": 71.4,
        "rounds": 1,
        "notes": "",
        "implied": -5.0,
        "adjustment": 1.4
    },
    {
        "name": "Neil Harris",
        "current": -1.7,
        "avgGross": 71.3,
        "avgNet": 73.0,
        "rounds": 11,
        "notes": "",
        "implied": -2.0,
        "adjustment": -0.3
    },
    {
        "name": "Pat Feutz",
        "current": 5.6,
        "avgGross": 77.0,
        "avgNet": 71.4,
        "rounds": 1,
        "notes": "",
        "implied": 5.9,
        "adjustment": 0.3
    },
    {
        "name": "Patrick Schueppert",
        "current": 16.8,
        "avgGross": 94.7,
        "avgNet": 77.9,
        "rounds": 11,
        "notes": "",
        "implied": 18.7,
        "adjustment": 1.9
    },
    {
        "name": "Paul Benga",
        "current": 4.2,
        "avgGross": 78.8,
        "avgNet": 74.5,
        "rounds": 12,
        "notes": "",
        "implied": 4.1,
        "adjustment": -0.1
    },
    {
        "name": "Rich Fagan",
        "current": 12.5,
        "avgGross": 92.0,
        "avgNet": 79.5,
        "rounds": 4,
        "notes": "",
        "implied": 17.7,
        "adjustment": 5.2
    },
    {
        "name": "Rich Mckeon",
        "current": 11.0,
        "avgGross": 86.0,
        "avgNet": 75.0,
        "rounds": 3,
        "notes": "",
        "implied": 14.1,
        "adjustment": 3.1
    },
    {
        "name": "Richard Lederman",
        "current": 12.9,
        "avgGross": 88.5,
        "avgNet": 75.6,
        "rounds": 6,
        "notes": "",
        "implied": 14.1,
        "adjustment": 1.2
    },
    {
        "name": "Rick Deloney",
        "current": 6.7,
        "avgGross": 84.4,
        "avgNet": 77.7,
        "rounds": 7,
        "notes": "",
        "implied": 9.0,
        "adjustment": 2.3
    },
    {
        "name": "Rick Meewes",
        "current": 6.5,
        "avgGross": 80.0,
        "avgNet": 73.5,
        "rounds": 3,
        "notes": "",
        "implied": 8.7,
        "adjustment": 2.2
    },
    {
        "name": "Rob Oliver",
        "current": 17.8,
        "avgGross": 91.8,
        "avgNet": 74.0,
        "rounds": 5,
        "notes": "",
        "implied": 17.5,
        "adjustment": -0.3
    },
    {
        "name": "Robert Hill",
        "current": 17.4,
        "avgGross": 97.6,
        "avgNet": 80.2,
        "rounds": 7,
        "notes": "",
        "implied": 21.4,
        "adjustment": 4.0
    },
    {
        "name": "Ron Amstutz",
        "current": 12.2,
        "avgGross": 85.7,
        "avgNet": 73.5,
        "rounds": 6,
        "notes": "",
        "implied": 11.1,
        "adjustment": -1.1
    },
    {
        "name": "Ron Marino",
        "current": 7.2,
        "avgGross": 81.2,
        "avgNet": 74.0,
        "rounds": 6,
        "notes": "",
        "implied": 7.7,
        "adjustment": 0.5
    },
    {
        "name": "Scott Benton",
        "current": 12.4,
        "avgGross": 88.4,
        "avgNet": 76.0,
        "rounds": 7,
        "notes": "",
        "implied": 13.8,
        "adjustment": 1.4
    },
    {
        "name": "Scott Bracken",
        "current": 9.3,
        "avgGross": 83.4,
        "avgNet": 74.1,
        "rounds": 8,
        "notes": "",
        "implied": 9.6,
        "adjustment": 0.3
    },
    {
        "name": "Scott Lucas",
        "current": 11.7,
        "avgGross": 85.6,
        "avgNet": 73.9,
        "rounds": 5,
        "notes": "",
        "implied": 11.4,
        "adjustment": -0.3
    },
    {
        "name": "Shane Bolosan",
        "current": 7.9,
        "avgGross": 84.5,
        "avgNet": 76.6,
        "rounds": 12,
        "notes": "",
        "implied": 7.5,
        "adjustment": -0.4
    },
    {
        "name": "Shawn Warner",
        "current": 12.8,
        "avgGross": 88.0,
        "avgNet": 75.2,
        "rounds": 1,
        "notes": "",
        "implied": 15.9,
        "adjustment": 3.1
    },
    {
        "name": "Stephen Cherepy",
        "current": 11.0,
        "avgGross": 87.0,
        "avgNet": 76.0,
        "rounds": 1,
        "notes": "",
        "implied": 15.0,
        "adjustment": 4.0
    },
    {
        "name": "Steve Mccormick",
        "current": 9.2,
        "avgGross": 85.6,
        "avgNet": 76.4,
        "rounds": 10,
        "notes": "",
        "implied": 9.9,
        "adjustment": 0.7
    },
    {
        "name": "Steve Rosenbluth",
        "current": 8.4,
        "avgGross": 86.2,
        "avgNet": 77.8,
        "rounds": 5,
        "notes": "",
        "implied": 12.6,
        "adjustment": 4.2
    },
    {
        "name": "Stewart Polakov",
        "current": 4.9,
        "avgGross": 74.0,
        "avgNet": 69.1,
        "rounds": 1,
        "notes": "",
        "implied": 3.2,
        "adjustment": -1.7
    },
    {
        "name": "Thomas Earl",
        "current": 4.9,
        "avgGross": 83.0,
        "avgNet": 78.1,
        "rounds": 2,
        "notes": "",
        "implied": 11.4,
        "adjustment": 6.5
    },
    {
        "name": "Todd Densley",
        "current": -0.8,
        "avgGross": 72.3,
        "avgNet": 73.1,
        "rounds": 7,
        "notes": "",
        "implied": 0.5,
        "adjustment": 1.3
    },
    {
        "name": "Tracy Copenhaver",
        "current": 14.8,
        "avgGross": 90.8,
        "avgNet": 76.0,
        "rounds": 4,
        "notes": "",
        "implied": 16.6,
        "adjustment": 1.8
    },
    {
        "name": "Travis Ingram",
        "current": 6.6,
        "avgGross": 80.2,
        "avgNet": 73.6,
        "rounds": 9,
        "notes": "",
        "implied": 7.1,
        "adjustment": 0.5
    },
    {
        "name": "Travis Jorgensen",
        "current": 8.7,
        "avgGross": 84.0,
        "avgNet": 75.3,
        "rounds": 1,
        "notes": "",
        "implied": 12.3,
        "adjustment": 3.6
    },
    {
        "name": "Trent Dana",
        "current": 15.6,
        "avgGross": 92.8,
        "avgNet": 77.2,
        "rounds": 6,
        "notes": "",
        "implied": 15.9,
        "adjustment": 0.3
    },
    {
        "name": "Win Doolittle",
        "current": 8.0,
        "avgGross": 90.0,
        "avgNet": 82.0,
        "rounds": 1,
        "notes": "",
        "implied": 17.8,
        "adjustment": 9.8
    },
    {
        "name": "Zach Coe",
        "current": 1.5,
        "avgGross": 74.3,
        "avgNet": 72.8,
        "rounds": 3,
        "notes": "",
        "implied": 3.5,
        "adjustment": 2.0
    },
    {
        "name": "Zach Fleishman",
        "current": 11.7,
        "avgGross": 86.3,
        "avgNet": 74.6,
        "rounds": 3,
        "notes": "",
        "implied": 14.4,
        "adjustment": 2.7
    },
    {
        "name": "Zach Mattson",
        "current": 6.1,
        "avgGross": 84.0,
        "avgNet": 77.9,
        "rounds": 2,
        "notes": "",
        "implied": 12.3,
        "adjustment": 6.2
    },
    {
        "name": "Zane Eisenbarth",
        "current": 4.4,
        "avgGross": 82.2,
        "avgNet": 77.8,
        "rounds": 6,
        "notes": "",
        "implied": 8.0,
        "adjustment": 3.6
    }
];

        const dataBest6 = [
    {
        "name": "Andrew Burnheimer",
        "current": 0.0,
        "avgGross": 83.0,
        "avgNet": 83.0,
        "rounds": 1,
        "notes": "",
        "implied": 11.4,
        "adjustment": 11.4
    },
    {
        "name": "Andy Meach",
        "current": 7.1,
        "avgGross": 83.0,
        "avgNet": 75.9,
        "rounds": 7,
        "notes": "",
        "implied": 10.6,
        "adjustment": 3.5
    },
    {
        "name": "Ben Magnone",
        "current": 10.4,
        "avgGross": 83.8,
        "avgNet": 73.4,
        "rounds": 10,
        "notes": "",
        "implied": 10.0,
        "adjustment": -0.4
    },
    {
        "name": "Brad Ackley",
        "current": 13.9,
        "avgGross": 92.0,
        "avgNet": 78.1,
        "rounds": 1,
        "notes": "",
        "implied": 19.6,
        "adjustment": 5.7
    },
    {
        "name": "Brian Howell",
        "current": 6.9,
        "avgGross": 81.5,
        "avgNet": 74.6,
        "rounds": 2,
        "notes": "",
        "implied": 10.1,
        "adjustment": 3.2
    },
    {
        "name": "Bud Scott",
        "current": 9.4,
        "avgGross": 87.5,
        "avgNet": 78.1,
        "rounds": 2,
        "notes": "",
        "implied": 15.5,
        "adjustment": 6.1
    },
    {
        "name": "Buddy Goldstone",
        "current": 13.0,
        "avgGross": 91.3,
        "avgNet": 78.3,
        "rounds": 3,
        "notes": "",
        "implied": 19.0,
        "adjustment": 6.0
    },
    {
        "name": "Chris Beck",
        "current": 13.2,
        "avgGross": 88.9,
        "avgNet": 75.7,
        "rounds": 10,
        "notes": "",
        "implied": 15.0,
        "adjustment": 1.8
    },
    {
        "name": "Chris Husong",
        "current": 9.0,
        "avgGross": 86.8,
        "avgNet": 77.8,
        "rounds": 5,
        "notes": "",
        "implied": 14.8,
        "adjustment": 5.8
    },
    {
        "name": "Chris Ryan",
        "current": 13.3,
        "avgGross": 92.3,
        "avgNet": 79.0,
        "rounds": 6,
        "notes": "",
        "implied": 19.9,
        "adjustment": 6.6
    },
    {
        "name": "Christopher Royce",
        "current": 13.9,
        "avgGross": 91.5,
        "avgNet": 77.6,
        "rounds": 11,
        "notes": "",
        "implied": 15.9,
        "adjustment": 2.0
    },
    {
        "name": "Clark Koch",
        "current": 8.8,
        "avgGross": 81.9,
        "avgNet": 73.1,
        "rounds": 9,
        "notes": "",
        "implied": 9.3,
        "adjustment": 0.5
    },
    {
        "name": "Conrad Copeland",
        "current": 11.8,
        "avgGross": 91.0,
        "avgNet": 79.2,
        "rounds": 1,
        "notes": "",
        "implied": 18.7,
        "adjustment": 6.9
    },
    {
        "name": "Dan Denham",
        "current": 6.5,
        "avgGross": 79.7,
        "avgNet": 73.2,
        "rounds": 3,
        "notes": "",
        "implied": 8.4,
        "adjustment": 1.9
    },
    {
        "name": "Dana Beckley",
        "current": 6.9,
        "avgGross": 90.0,
        "avgNet": 83.1,
        "rounds": 2,
        "notes": "",
        "implied": 17.8,
        "adjustment": 10.8
    },
    {
        "name": "Darrin Harn",
        "current": 0.0,
        "avgGross": 77.0,
        "avgNet": 77.0,
        "rounds": 1,
        "notes": "",
        "implied": 5.9,
        "adjustment": 5.9
    },
    {
        "name": "David Edwards",
        "current": 8.6,
        "avgGross": 81.5,
        "avgNet": 72.9,
        "rounds": 2,
        "notes": "",
        "implied": 10.1,
        "adjustment": 1.5
    },
    {
        "name": "David Pearson",
        "current": 9.6,
        "avgGross": 83.0,
        "avgNet": 73.4,
        "rounds": 1,
        "notes": "",
        "implied": 11.4,
        "adjustment": 1.8
    },
    {
        "name": "Dean Fisk",
        "current": 8.0,
        "avgGross": 85.7,
        "avgNet": 77.7,
        "rounds": 3,
        "notes": "",
        "implied": 13.8,
        "adjustment": 5.8
    },
    {
        "name": "Derek Becko",
        "current": 3.5,
        "avgGross": 79.2,
        "avgNet": 75.8,
        "rounds": 8,
        "notes": "",
        "implied": 6.7,
        "adjustment": 3.2
    },
    {
        "name": "Dusty Wasmund",
        "current": 7.6,
        "avgGross": 80.8,
        "avgNet": 73.2,
        "rounds": 4,
        "notes": "",
        "implied": 9.4,
        "adjustment": 1.8
    },
    {
        "name": "Eric Lamb",
        "current": 24.0,
        "avgGross": 96.0,
        "avgNet": 72.0,
        "rounds": 1,
        "notes": "",
        "implied": 23.2,
        "adjustment": -0.8
    },
    {
        "name": "Eric Weiss",
        "current": 1.0,
        "avgGross": 72.9,
        "avgNet": 71.9,
        "rounds": 9,
        "notes": "",
        "implied": 1.1,
        "adjustment": 0.1
    },
    {
        "name": "Frank Angeloro",
        "current": 7.1,
        "avgGross": 81.0,
        "avgNet": 73.9,
        "rounds": 9,
        "notes": "",
        "implied": 8.4,
        "adjustment": 1.3
    },
    {
        "name": "Glenn Brand",
        "current": 11.1,
        "avgGross": 96.0,
        "avgNet": 84.9,
        "rounds": 1,
        "notes": "",
        "implied": 23.2,
        "adjustment": 12.1
    },
    {
        "name": "Greg Funk",
        "current": 5.2,
        "avgGross": 77.6,
        "avgNet": 72.4,
        "rounds": 11,
        "notes": "",
        "implied": 5.0,
        "adjustment": -0.2
    },
    {
        "name": "Hans Anderson",
        "current": 0.6,
        "avgGross": 73.7,
        "avgNet": 73.1,
        "rounds": 3,
        "notes": "",
        "implied": 2.9,
        "adjustment": 2.3
    },
    {
        "name": "James Feutz",
        "current": 0.0,
        "avgGross": 72.0,
        "avgNet": 72.0,
        "rounds": 2,
        "notes": "",
        "implied": 1.4,
        "adjustment": 1.4
    },
    {
        "name": "Jamey Davis",
        "current": 13.4,
        "avgGross": 85.3,
        "avgNet": 71.9,
        "rounds": 3,
        "notes": "",
        "implied": 13.5,
        "adjustment": 0.1
    },
    {
        "name": "Jared Strathe",
        "current": -3.8,
        "avgGross": 69.3,
        "avgNet": 73.1,
        "rounds": 3,
        "notes": "",
        "implied": -1.1,
        "adjustment": 2.7
    },
    {
        "name": "Jeff Avery",
        "current": 11.2,
        "avgGross": 86.7,
        "avgNet": 75.5,
        "rounds": 3,
        "notes": "",
        "implied": 14.7,
        "adjustment": 3.5
    },
    {
        "name": "Jeff Cloepfil",
        "current": 12.0,
        "avgGross": 84.4,
        "avgNet": 72.4,
        "rounds": 7,
        "notes": "",
        "implied": 12.3,
        "adjustment": 0.3
    },
    {
        "name": "Jeff De Laveaga",
        "current": 0.5,
        "avgGross": 70.0,
        "avgNet": 69.5,
        "rounds": 3,
        "notes": "",
        "implied": -0.5,
        "adjustment": -1.0
    },
    {
        "name": "Jim Brown",
        "current": 6.2,
        "avgGross": 78.0,
        "avgNet": 71.8,
        "rounds": 1,
        "notes": "",
        "implied": 6.8,
        "adjustment": 0.6
    },
    {
        "name": "Jim Restivo",
        "current": 12.7,
        "avgGross": 88.7,
        "avgNet": 76.0,
        "rounds": 6,
        "notes": "",
        "implied": 16.6,
        "adjustment": 3.9
    },
    {
        "name": "Joe Sepessy",
        "current": 6.1,
        "avgGross": 77.7,
        "avgNet": 71.6,
        "rounds": 6,
        "notes": "",
        "implied": 6.5,
        "adjustment": 0.4
    },
    {
        "name": "Jon Vrolyks",
        "current": 5.7,
        "avgGross": 82.5,
        "avgNet": 76.8,
        "rounds": 6,
        "notes": "",
        "implied": 10.9,
        "adjustment": 5.2
    },
    {
        "name": "Justin Deuker",
        "current": 3.0,
        "avgGross": 78.5,
        "avgNet": 75.5,
        "rounds": 6,
        "notes": "",
        "implied": 7.3,
        "adjustment": 4.3
    },
    {
        "name": "Kevin Barber",
        "current": 15.3,
        "avgGross": 88.4,
        "avgNet": 73.1,
        "rounds": 7,
        "notes": "",
        "implied": 15.8,
        "adjustment": 0.5
    },
    {
        "name": "Kevin Mueller",
        "current": 9.4,
        "avgGross": 89.0,
        "avgNet": 79.6,
        "rounds": 1,
        "notes": "",
        "implied": 16.9,
        "adjustment": 7.5
    },
    {
        "name": "Kiernan Mattson",
        "current": 1.4,
        "avgGross": 75.6,
        "avgNet": 74.2,
        "rounds": 7,
        "notes": "",
        "implied": 3.6,
        "adjustment": 2.2
    },
    {
        "name": "Korey Jerome",
        "current": 9.3,
        "avgGross": 85.8,
        "avgNet": 76.5,
        "rounds": 9,
        "notes": "",
        "implied": 10.0,
        "adjustment": 0.7
    },
    {
        "name": "Larry Caplan",
        "current": 16.1,
        "avgGross": 93.8,
        "avgNet": 77.7,
        "rounds": 5,
        "notes": "",
        "implied": 21.2,
        "adjustment": 5.1
    },
    {
        "name": "Mark Albedyll",
        "current": 14.7,
        "avgGross": 92.8,
        "avgNet": 78.1,
        "rounds": 5,
        "notes": "",
        "implied": 20.3,
        "adjustment": 5.6
    },
    {
        "name": "Mark James",
        "current": 12.6,
        "avgGross": 90.0,
        "avgNet": 77.4,
        "rounds": 3,
        "notes": "",
        "implied": 17.8,
        "adjustment": 5.2
    },
    {
        "name": "Mark Lewis",
        "current": 10.4,
        "avgGross": 86.1,
        "avgNet": 75.7,
        "rounds": 7,
        "notes": "",
        "implied": 13.2,
        "adjustment": 2.8
    },
    {
        "name": "Matt Neimeier",
        "current": 12.2,
        "avgGross": 87.1,
        "avgNet": 74.9,
        "rounds": 9,
        "notes": "",
        "implied": 12.2,
        "adjustment": -0.0
    },
    {
        "name": "Michael Falagrady",
        "current": 5.7,
        "avgGross": 81.3,
        "avgNet": 75.6,
        "rounds": 3,
        "notes": "",
        "implied": 9.9,
        "adjustment": 4.2
    },
    {
        "name": "Mike Muller",
        "current": 7.0,
        "avgGross": 82.8,
        "avgNet": 75.8,
        "rounds": 9,
        "notes": "",
        "implied": 9.0,
        "adjustment": 2.0
    },
    {
        "name": "Nate Adams",
        "current": -6.4,
        "avgGross": 65.0,
        "avgNet": 71.4,
        "rounds": 1,
        "notes": "",
        "implied": -5.0,
        "adjustment": 1.4
    },
    {
        "name": "Neil Harris",
        "current": -1.7,
        "avgGross": 71.3,
        "avgNet": 73.0,
        "rounds": 11,
        "notes": "",
        "implied": -1.6,
        "adjustment": 0.1
    },
    {
        "name": "Pat Feutz",
        "current": 5.6,
        "avgGross": 77.0,
        "avgNet": 71.4,
        "rounds": 1,
        "notes": "",
        "implied": 5.9,
        "adjustment": 0.3
    },
    {
        "name": "Patrick Schueppert",
        "current": 16.8,
        "avgGross": 94.7,
        "avgNet": 77.9,
        "rounds": 11,
        "notes": "",
        "implied": 19.9,
        "adjustment": 3.1
    },
    {
        "name": "Paul Benga",
        "current": 4.2,
        "avgGross": 78.8,
        "avgNet": 74.5,
        "rounds": 12,
        "notes": "",
        "implied": 5.2,
        "adjustment": 1.0
    },
    {
        "name": "Rich Fagan",
        "current": 12.5,
        "avgGross": 92.0,
        "avgNet": 79.5,
        "rounds": 4,
        "notes": "",
        "implied": 19.6,
        "adjustment": 7.1
    },
    {
        "name": "Rich Mckeon",
        "current": 11.0,
        "avgGross": 86.0,
        "avgNet": 75.0,
        "rounds": 3,
        "notes": "",
        "implied": 14.1,
        "adjustment": 3.1
    },
    {
        "name": "Richard Lederman",
        "current": 12.9,
        "avgGross": 88.5,
        "avgNet": 75.6,
        "rounds": 6,
        "notes": "",
        "implied": 16.4,
        "adjustment": 3.5
    },
    {
        "name": "Rick Deloney",
        "current": 6.7,
        "avgGross": 84.4,
        "avgNet": 77.7,
        "rounds": 7,
        "notes": "",
        "implied": 12.0,
        "adjustment": 5.3
    },
    {
        "name": "Rick Meewes",
        "current": 6.5,
        "avgGross": 80.0,
        "avgNet": 73.5,
        "rounds": 3,
        "notes": "",
        "implied": 8.7,
        "adjustment": 2.2
    },
    {
        "name": "Rob Oliver",
        "current": 17.8,
        "avgGross": 91.8,
        "avgNet": 74.0,
        "rounds": 5,
        "notes": "",
        "implied": 19.4,
        "adjustment": 1.6
    },
    {
        "name": "Robert Hill",
        "current": 17.4,
        "avgGross": 97.6,
        "avgNet": 80.2,
        "rounds": 7,
        "notes": "",
        "implied": 23.7,
        "adjustment": 6.3
    },
    {
        "name": "Ron Amstutz",
        "current": 12.2,
        "avgGross": 85.7,
        "avgNet": 73.5,
        "rounds": 6,
        "notes": "",
        "implied": 13.8,
        "adjustment": 1.6
    },
    {
        "name": "Ron Marino",
        "current": 7.2,
        "avgGross": 81.2,
        "avgNet": 74.0,
        "rounds": 6,
        "notes": "",
        "implied": 9.7,
        "adjustment": 2.5
    },
    {
        "name": "Scott Benton",
        "current": 12.4,
        "avgGross": 88.4,
        "avgNet": 76.0,
        "rounds": 7,
        "notes": "",
        "implied": 15.5,
        "adjustment": 3.1
    },
    {
        "name": "Scott Bracken",
        "current": 9.3,
        "avgGross": 83.4,
        "avgNet": 74.1,
        "rounds": 8,
        "notes": "",
        "implied": 10.8,
        "adjustment": 1.5
    },
    {
        "name": "Scott Lucas",
        "current": 11.7,
        "avgGross": 85.6,
        "avgNet": 73.9,
        "rounds": 5,
        "notes": "",
        "implied": 13.8,
        "adjustment": 2.1
    },
    {
        "name": "Shane Bolosan",
        "current": 7.9,
        "avgGross": 84.5,
        "avgNet": 76.6,
        "rounds": 12,
        "notes": "",
        "implied": 9.0,
        "adjustment": 1.1
    },
    {
        "name": "Shawn Warner",
        "current": 12.8,
        "avgGross": 88.0,
        "avgNet": 75.2,
        "rounds": 1,
        "notes": "",
        "implied": 15.9,
        "adjustment": 3.1
    },
    {
        "name": "Stephen Cherepy",
        "current": 11.0,
        "avgGross": 87.0,
        "avgNet": 76.0,
        "rounds": 1,
        "notes": "",
        "implied": 15.0,
        "adjustment": 4.0
    },
    {
        "name": "Steve Mccormick",
        "current": 9.2,
        "avgGross": 85.6,
        "avgNet": 76.4,
        "rounds": 10,
        "notes": "",
        "implied": 11.2,
        "adjustment": 2.0
    },
    {
        "name": "Steve Rosenbluth",
        "current": 8.4,
        "avgGross": 86.2,
        "avgNet": 77.8,
        "rounds": 5,
        "notes": "",
        "implied": 14.3,
        "adjustment": 5.9
    },
    {
        "name": "Stewart Polakov",
        "current": 4.9,
        "avgGross": 74.0,
        "avgNet": 69.1,
        "rounds": 1,
        "notes": "",
        "implied": 3.2,
        "adjustment": -1.7
    },
    {
        "name": "Thomas Earl",
        "current": 4.9,
        "avgGross": 83.0,
        "avgNet": 78.1,
        "rounds": 2,
        "notes": "",
        "implied": 11.4,
        "adjustment": 6.5
    },
    {
        "name": "Todd Densley",
        "current": -0.8,
        "avgGross": 72.3,
        "avgNet": 73.1,
        "rounds": 7,
        "notes": "",
        "implied": 1.1,
        "adjustment": 1.9
    },
    {
        "name": "Tracy Copenhaver",
        "current": 14.8,
        "avgGross": 90.8,
        "avgNet": 76.0,
        "rounds": 4,
        "notes": "",
        "implied": 18.5,
        "adjustment": 3.7
    },
    {
        "name": "Travis Ingram",
        "current": 6.6,
        "avgGross": 80.2,
        "avgNet": 73.6,
        "rounds": 9,
        "notes": "",
        "implied": 8.0,
        "adjustment": 1.4
    },
    {
        "name": "Travis Jorgensen",
        "current": 8.7,
        "avgGross": 84.0,
        "avgNet": 75.3,
        "rounds": 1,
        "notes": "",
        "implied": 12.3,
        "adjustment": 3.6
    },
    {
        "name": "Trent Dana",
        "current": 15.6,
        "avgGross": 92.8,
        "avgNet": 77.2,
        "rounds": 6,
        "notes": "",
        "implied": 20.3,
        "adjustment": 4.7
    },
    {
        "name": "Win Doolittle",
        "current": 8.0,
        "avgGross": 90.0,
        "avgNet": 82.0,
        "rounds": 1,
        "notes": "",
        "implied": 17.8,
        "adjustment": 9.8
    },
    {
        "name": "Zach Coe",
        "current": 1.5,
        "avgGross": 74.3,
        "avgNet": 72.8,
        "rounds": 3,
        "notes": "",
        "implied": 3.5,
        "adjustment": 2.0
    },
    {
        "name": "Zach Fleishman",
        "current": 11.7,
        "avgGross": 86.3,
        "avgNet": 74.6,
        "rounds": 3,
        "notes": "",
        "implied": 14.4,
        "adjustment": 2.7
    },
    {
        "name": "Zach Mattson",
        "current": 6.1,
        "avgGross": 84.0,
        "avgNet": 77.9,
        "rounds": 2,
        "notes": "",
        "implied": 12.3,
        "adjustment": 6.2
    },
    {
        "name": "Zane Eisenbarth",
        "current": 4.4,
        "avgGross": 82.2,
        "avgNet": 77.8,
        "rounds": 6,
        "notes": "",
        "implied": 10.6,
        "adjustment": 6.2
    }
];


        let currentData = [...dataBest3];
        let currentMode = 'best3';
        let currentSort = { column: 'adjustment', dir: 'asc' };
        let minRounds = 0;

        function init() {
            setMode('best3');
        }

        function setMode(mode) {
            currentMode = mode;
            const btn3 = document.getElementById('btn-best3');
            const btn6 = document.getElementById('btn-best6');

            if (mode === 'best3') {
                btn3.className = "px-4 py-2 text-sm font-medium border rounded-l-lg active-mode transition-colors";
                btn6.className = "px-4 py-2 text-sm font-medium border rounded-r-lg inactive-mode transition-colors";
                currentData = [...dataBest3];
            } else {
                btn3.className = "px-4 py-2 text-sm font-medium border rounded-l-lg inactive-mode transition-colors";
                btn6.className = "px-4 py-2 text-sm font-medium border rounded-r-lg active-mode transition-colors";
                currentData = [...dataBest6];
            }

            applyFilters();
        }

        function calculateStats() {
            document.getElementById('totalPlayers').textContent = currentData.length;
            const avgGross = currentData.reduce((acc, curr) => acc + curr.avgGross, 0) / currentData.length;
            document.getElementById('groupAvgGross').textContent = avgGross.toFixed(1);

            // Calculate Top 3 Adjustments (Lowest negative numbers)
            // Clone and filter out 0 or positive adjustments to focus on "improvers" or just sort all
            // We'll sort all by adjustment ascending
            const sortedByAdj = [...currentData].sort((a, b) => a.adjustment - b.adjustment);

            const top1 = sortedByAdj[0];
            const top2 = sortedByAdj[1];
            const top3 = sortedByAdj[2];

            // Render Rank 1
            if (top1) {
                document.getElementById('rank1Name').textContent = top1.name;
                document.getElementById('rank1Val').textContent = top1.adjustment;
                document.getElementById('rank1Rounds').textContent = top1.rounds + " rounds";
            }

            // Render Rank 2
            if (top2) {
                document.getElementById('rank2Name').textContent = top2.name;
                document.getElementById('rank2Val').textContent = top2.adjustment;
                document.getElementById('rank2Rounds').textContent = top2.rounds + " rounds";
            }

            // Render Rank 3
            if (top3) {
                document.getElementById('rank3Name').textContent = top3.name;
                document.getElementById('rank3Val').textContent = top3.adjustment;
                document.getElementById('rank3Rounds').textContent = top3.rounds + " rounds";
            }
        }

        function renderTable(data) {
            const tbody = document.getElementById('statsTableBody');
            tbody.innerHTML = '';

            data.forEach(player => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-slate-50 transition-colors";

                // Adjustment Coloring
                let adjClass = "font-medium text-slate-400"; // Default 0
                if (player.adjustment < -1.5) adjClass = "negative-adj";
                else if (player.adjustment < 0) adjClass = "text-orange-500 font-medium";

                // Rounds Warning
                const roundsWarning = player.rounds < 3 ? `<i class="fa-solid fa-triangle-exclamation text-yellow-500 ml-1" title="Low Round Count"></i>` : '';

                tr.innerHTML = `
                    <td class="p-4 font-medium text-slate-900 border-b border-slate-100">${player.name}</td>
                    <td class="p-4 text-center border-b border-slate-100">${player.implied}</td>
                    <td class="p-4 text-center border-b border-slate-100">${player.current}</td>
                    <td class="p-4 text-center border-b border-slate-100 ${adjClass}">${player.adjustment}</td>
                    <td class="p-4 text-center border-b border-slate-100">${player.avgGross}</td>
                    <td class="p-4 text-center border-b border-slate-100">${player.avgNet}</td>
                    <td class="p-4 text-center border-b border-slate-100">${player.rounds} ${roundsWarning}</td>
                    <td class="p-4 text-slate-400 text-xs italic border-b border-slate-100">${player.notes}</td>
                `;
                tbody.appendChild(tr);
            });

            calculateStats(); // Recalculate top 3 based on current filtered view if desired, or global. Currently recalculates based on currentData (filtered)
        }

        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.dir = column === 'name' ? 'asc' : 'asc';
            }

            document.querySelectorAll('th i').forEach(i => i.className = 'fa-solid fa-sort ml-1 text-slate-300');
            const activeHeader = document.querySelector(`th[onclick="sortTable('${column}')"] i`);
            if (activeHeader) {
                activeHeader.className = `fa-solid fa-sort-${currentSort.dir === 'asc' ? 'up' : 'down'} ml-1 text-emerald-600`;
            }

            applyFilters(); // Re-sort happens inside applyFilters
        }

        function filterRounds(min) {
            minRounds = min;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (parseInt(btn.dataset.min) === min) {
                    btn.classList.add('bg-emerald-100', 'text-emerald-700', 'border-emerald-200');
                    btn.classList.remove('bg-slate-100');
                } else {
                    btn.classList.remove('bg-emerald-100', 'text-emerald-700', 'border-emerald-200');
                    btn.classList.add('bg-slate-100');
                }
            });
            applyFilters();
        }

        document.getElementById('searchInput').addEventListener('keyup', (e) => {
            applyFilters();
        });

        function applyFilters() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            const sourceData = currentMode === 'best3' ? dataBest3 : dataBest6;

            currentData = sourceData.filter(player => {
                const matchesSearch = player.name.toLowerCase().includes(term);
                const matchesRounds = player.rounds >= minRounds;
                return matchesSearch && matchesRounds;
            });

            // Re-apply current sort
            const col = currentSort.column;
            const dir = currentSort.dir;
            currentData.sort((a, b) => {
                let valA = a[col];
                let valB = b[col];
                if (typeof valA === 'string') {
                    valA = valA.toLowerCase();
                    valB = valB.toLowerCase();
                }
                if (valA < valB) return dir === 'asc' ? -1 : 1;
                if (valA > valB) return dir === 'asc' ? 1 : -1;
                return 0;
            });

            renderTable(currentData);
        }

        // Run
        init();

    </script>
</body>

</html>