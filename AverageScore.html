<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SG@SG - Hole Averages</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom Grid for the specific 3 rows of 6 columns request on large screens */
        .hole-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1.5rem;
        }

        @media (min-width: 640px) {
            .hole-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .hole-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1400px) {
            .hole-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        .gauge-container {
            position: relative;
            width: 100%;
            padding-bottom: 60%;
            /* Aspect ratio */
            height: 0;
            overflow: hidden;
        }

        .gauge-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .needle {
            transition: transform 1s cubic-bezier(0.4, 0.0, 0.2, 1);
            transform-origin: 100px 90px;
            /* Pivot point matching SVG coordinate space */
        }

        .needle-label {
            font-size: 12px;
            font-weight: bold;
            fill: #374151;
            text-anchor: middle;
            pointer-events: none;
        }

        /* Animation for scores > 1 over par */
        @keyframes flash-red {

            0%,
            100% {
                opacity: 1;
                color: #ef4444;
            }

            50% {
                opacity: 0.4;
                color: #b91c1c;
            }
        }

        .flash-severe {
            animation: flash-red 1s infinite;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800">

    <header class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="SG-SG Map.png" alt="SG-SG Map" class="h-12 w-12 mr-4" onerror="this.style.display='none'">
                <a href="index.html"
                    class="text-2xl font-bold text-gray-800 hover:text-green-700 transition duration-300">SG@SG</a>
                <img src="Sterling Grove Flag.png" alt="Sterling Grove Flag" class="h-12 w-12 ml-4"
                    onerror="this.style.display='none'">
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="index.html" class="text-gray-600 hover:text-green-700 transition duration-300">Home</a>
                <a href="index.html#events"
                    class="text-gray-600 hover:text-green-700 transition duration-300">Events</a>
                <a href="index.html#leaderboard"
                    class="text-gray-600 hover:text-green-700 transition duration-300">Leaderboard</a>
                <a href="index.html#contact"
                    class="text-gray-600 hover:text-green-700 transition duration-300">Contact</a>
            </nav>
            <button class="md:hidden flex items-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7">
                    </path>
                </svg>
            </button>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">
        <section class="bg-white p-8 rounded-lg shadow-lg">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Course Statistics</h2>
                <p class="text-gray-600">Average Gross Score vs Par in Order of Hardest to Easiest</p>
            </div>

            <div id="dashboard-grid" class="hole-grid">
            </div>

            <div class="mt-10 pt-6 border-t border-gray-200 text-center text-sm text-gray-500">
                <p class="font-semibold mb-2">Gauge Legend</p>
                <div class="flex justify-center items-center gap-4 flex-wrap">
                    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-green-500"></span> Good
                        (&lt; +0.5)</span>
                    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-red-500"></span>
                        Difficult (&gt;= +0.5)</span>
                    <span class="flex items-center gap-1"><span
                            class="w-3 h-3 rounded-full bg-red-500 animate-pulse"></span> Severe (&gt; +1.0)</span>
                </div>
                <p class="mt-2 text-xs">Needle points to Absolute Score (Scale: 3.0 - 6.0). Value below gauge is
                    Relative to Par.</p>
            </div>
        </section>
    </main>

    <footer id="contact" class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
                <div>
                    <h3 class="font-bold text-lg mb-4">Sterling Grove Golf and Country Club</h3>
                    <p class="text-gray-400">11440 North Greenwich Boulevard<br>Surprise, AZ 85388</p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Quick Links</h3>
                    <ul>
                        <li class="mb-2"><a href="index.html" class="text-gray-400 hover:text-white">Home</a></li>
                        <li class="mb-2"><a href="index.html#events" class="text-gray-400 hover:text-white">Events</a>
                        </li>
                        <li class="mb-2"><a href="index.html#leaderboard"
                                class="text-gray-400 hover:text-white">Leaderboard</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Contact Us</h3>
                    <p class="text-gray-400">Paul Benga: <a href="https://wa.me/14806202088" class="hover:text-white"
                            target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
                    <p class="text-gray-400">Patrick Schueppert: <a href="https://wa.me/17024996923"
                            class="hover:text-white" target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
                    <p class="text-gray-400">Chris Royce: <a href="https://wa.me/17195104311" class="hover:text-white"
                            target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500">
                <p>&copy; 2025 SG@SG. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Data provided by user + Par Data
        const holeData = [
    {
        "hole": 1,
        "score": 4.87,
        "par": 4
    },
    {
        "hole": 2,
        "score": 4.46,
        "par": 4
    },
    {
        "hole": 3,
        "score": 3.57,
        "par": 3
    },
    {
        "hole": 4,
        "score": 5.66,
        "par": 5
    },
    {
        "hole": 5,
        "score": 4.99,
        "par": 4
    },
    {
        "hole": 6,
        "score": 4.45,
        "par": 4
    },
    {
        "hole": 7,
        "score": 3.62,
        "par": 3
    },
    {
        "hole": 8,
        "score": 5.05,
        "par": 4
    },
    {
        "hole": 9,
        "score": 5.57,
        "par": 5
    },
    {
        "hole": 10,
        "score": 4.58,
        "par": 4
    },
    {
        "hole": 11,
        "score": 5.41,
        "par": 5
    },
    {
        "hole": 12,
        "score": 5.0,
        "par": 4
    },
    {
        "hole": 13,
        "score": 3.59,
        "par": 3
    },
    {
        "hole": 14,
        "score": 4.56,
        "par": 4
    },
    {
        "hole": 15,
        "score": 4.58,
        "par": 4
    },
    {
        "hole": 16,
        "score": 4.33,
        "par": 4
    },
    {
        "hole": 17,
        "score": 3.81,
        "par": 3
    },
    {
        "hole": 18,
        "score": 5.87,
        "par": 5
    }
];

        // Config for the gauge
        const MIN_SCORE = 3.0;
        const MAX_SCORE = 6.0;

        function getGaugeColor(score, par) {
            // Logic: 
            // < 0.5 over par = Good (Green)
            // >= 0.5 over par = Difficult (Red)
            // Note: Flashing is handled via CSS class, but base color stays red for difficult

            const relative = score - par;

            if (relative < 0.5) {
                return "#22c55e"; // Green-500
            } else {
                return "#ef4444"; // Red-500
            }
        }

        function calculateRotation(score) {
            // Map score to -90deg (min) to 90deg (max)
            const clampedScore = Math.max(MIN_SCORE, Math.min(MAX_SCORE, score));
            const percentage = (clampedScore - MIN_SCORE) / (MAX_SCORE - MIN_SCORE);
            return (percentage * 180) - 90;
        }

        function calculateTipCoordinates(rotationDeg) {
            // Needle logic matching SVG coordinates
            const length = 75; // Slightly longer than the line for the label
            const cx = 100;
            const cy = 90;

            const radians = rotationDeg * (Math.PI / 180);
            const x = cx + length * Math.sin(radians);
            const y = cy - length * Math.cos(radians);

            return { x, y };
        }

        function createGaugeCard(data) {
            const rotation = calculateRotation(data.score);
            let color = getGaugeColor(data.score, data.par);
            const absoluteScore = data.score.toFixed(2);

            // Calculate Relative Score
            const relativeVal = data.score - data.par;
            const sign = relativeVal > 0 ? "+" : "";
            const relativeScoreStr = relativeVal === 0 ? "E" : sign + relativeVal.toFixed(2);

            // Calculate label position
            const labelPos = calculateTipCoordinates(rotation);

            // Determine if flashing is needed (> 1 over par)
            let animationClass = "";
            if (relativeVal > 1.0) {
                animationClass = "flash-severe";
                // Explicitly ensure base color is red for the animation to toggle from
                color = "#ef4444";
            }

            return `
                <div class="bg-gray-50 rounded-xl border border-gray-100 p-4 flex flex-col items-center hover:shadow-md transition-shadow duration-300">
                    <div class="text-center mb-1">
                        <h3 class="text-lg font-bold text-gray-700">Hole ${data.hole}</h3>
                        <p class="text-sm text-gray-500 font-medium">Par ${data.par}</p>
                    </div>
                    
                    <div class="gauge-container">
                        <svg class="gauge-svg" viewBox="0 0 200 120">
                            <path d="M20 90 A 80 80 0 0 1 180 90" 
                                  fill="none" 
                                  stroke="#e5e7eb" 
                                  stroke-width="20" 
                                  stroke-linecap="round" />
                            
                            <g class="needle" style="transform: rotate(${rotation}deg);">
                                <line x1="100" y1="90" x2="100" y2="25" stroke="#1f2937" stroke-width="4" stroke-linecap="round" />
                                <circle cx="100" cy="90" r="6" fill="#1f2937" />
                            </g>
                            
                            <rect x="${labelPos.x - 16}" y="${labelPos.y - 10}" width="32" height="16" rx="4" fill="white" fill-opacity="0.8" />
                            <text x="${labelPos.x}" y="${labelPos.y + 2}" class="needle-label">${absoluteScore}</text>
                            
                            <text x="20" y="110" font-size="10" fill="#9ca3af" text-anchor="middle">3.0</text>
                            <text x="100" y="110" font-size="10" fill="#9ca3af" text-anchor="middle">4.5</text>
                            <text x="180" y="110" font-size="10" fill="#9ca3af" text-anchor="middle">6.0</text>
                        </svg>
                    </div>

                    <div class="mt-[-10px] text-center">
                        <span class="text-3xl font-bold ${animationClass}" style="color: ${color}">${relativeScoreStr}</span>
                        <span class="text-xs text-gray-400 block uppercase tracking-wide">Rel to Par</span>
                    </div>
                </div>
            `;
        }

        const gridContainer = document.getElementById('dashboard-grid');

        // Generate HTML for all holes
        let htmlContent = '';
        holeData.forEach(hole => {
            htmlContent += createGaugeCard(hole);
        });

        gridContainer.innerHTML = htmlContent;

    </script>
</body>

</html>